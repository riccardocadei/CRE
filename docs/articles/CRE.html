<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="CRE">
<title>CRE • CRE</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="CRE">
<meta property="og:description" content="CRE">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">CRE</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/CRE.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Users</h6>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Developers</h6>
    <a class="dropdown-item" href="../articles/Contribution.html">Contribution</a>
    <a class="dropdown-item" href="../articles/Testing-the-Package.html">Testing the CRE Package</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/NSAPH-Software/CRE/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>CRE</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/NSAPH-Software/CRE/blob/HEAD/vignettes/CRE.Rmd" class="external-link"><code>vignettes/CRE.Rmd</code></a></small>
      <div class="d-none name"><code>CRE.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Installing the latest developing version.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"NSAPH-Software/CRE"</span>, ref<span class="op">=</span><span class="st">"develop"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/NSAPH-Software/CRE" class="external-link">"CRE"</a></span><span class="op">)</span></span></code></pre></div>
<p>Installing from CRAN.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"CRE"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>Input parameters:</p>
<p><strong><code>y</code></strong> The observed response (outcome)
vector.<br><strong><code>z</code></strong> The treatment (exposure, policy)
vector.<br><strong><code>X</code></strong> The covariate matrix.<br><strong><code>method_params</code></strong> Parameters for estimating
the individual treatment effect, including:<br><strong>Parameters for Discovery</strong><br>
- <strong><code>ratio_dis</code></strong> The ratio of data delegated to
the discovery sub-sample.<br>
- <strong><code>ite_method_dis</code></strong> The method to estimate
the discovery sub-sample in estimating individual treatment effect
(ITE).<br>
- <strong><code>include_ps_dis</code></strong> Whether or not to include
propensity score estimate as a covariate in discovery ITE estimation,
considered only for BART, or CF.<br>
- <strong><code>ps_method_dis</code></strong> The estimation model for
the propensity score on the discovery sub-sample.<br>
- <strong><code>or_method_dis</code></strong> The estimation model for
the outcome regressions estimate_ite_aipw on the discovery
sub-sample.<br><strong>Parameters for Inference</strong><br>
- <strong><code>ite_method_inf</code></strong> The method to estimate
the inference sample ITE.<br>
- <strong><code>include_ps_inf</code></strong> Whether or not to include
propensity score estimate as a covariate in inference ITE estimation,
considered only for BART, or CF.<br>
- <strong><code>ps_method_inf</code></strong> The estimation model for
the propensity score on the inference subsample.<br>
- <strong><code>or_method_inf</code></strong> The estimation model for
the outcome regressions in estimate_ite_aipw on the inference
subsample.<br><strong>Other Parameters</strong> -
<strong><code>include_offset</code></strong> Whether or not to include
an offset when estimating the ITE, for Poisson only.<br>
- <strong><code>offset_name</code></strong> The name of the offset, if
it is to be included.<br>
- <strong><code>cate_method</code></strong> The method to estimate the
conditional average treatment effect (CATE) values.<br>
- <strong><code>cate_SL_library</code></strong> The library used if
cate_method is set to DRLearner.<br>
- <strong><code>filter_cate</code></strong> Whether or not to filter
rules with p-value &lt;= 0.05.<br><strong><code>hyper_params</code></strong> The list of parameters
required to tune the functions, including:<br>
- <strong><code>effect_modifiers</code></strong> Effect Modifiers for
Rules Generation.<br>
- <strong><code>ntrees_rf</code></strong> The number of decision trees
for randomForest.<br>
- <strong><code>ntrees_gbm</code></strong> The number of decision trees
for gradient boosting.<br>
- <strong><code>node_size</code></strong> The minimum size of the trees’
terminal nodes.<br>
- <strong><code>max_nodes</code></strong> The maximum number of terminal
nodes trees in the forest can have.<br>
- <strong><code>max_depth</code></strong> The number of top levels from
each tree considered to extract conditions.<br>
- <strong><code>replace</code></strong> Boolean variable for replacement
in bootstrapping.<br>
- <strong><code>max_decay</code></strong> Decay Threshold for pruning
the rules.<br>
- <strong><code>type_decay</code></strong> Decay Type for pruning the
rules (1: relative error; 2: error).<br>
- <strong><code>t_anom</code></strong> The threshold to define too
generic or too specific (anomalous) rules.<br>
- <strong><code>t_corr</code></strong> The threshold to define
correlated rules.<br>
- <strong><code>q</code></strong> Number of (unique) selected rules per
subsample in stability selection.<br>
- <strong><code>stability_selection</code></strong> Whether or not using
stability selection for selecting the causal rules.<br>
- <strong><code>pfer_val</code></strong> The Per-Family Error Rate, the
expected number of false discoveries.</p>
<div class="section level4">
<h4 id="a-note-on-the-parameters">A note on the parameters<a class="anchor" aria-label="anchor" href="#a-note-on-the-parameters"></a>
</h4>
<p><strong>(1)</strong> Options for the ITE estimation are as
follows:</p>
<ul>
<li>Inverse Propensity Weighting (<code>ipw</code>)</li>
<li>Stabilized Inverse Propensity Weighting (<code>sipw</code>)</li>
<li>Augmented Inverse Propensity Weighting (<code>aipw</code>)</li>
<li>Outcome Regression (<code>oreg</code>)</li>
<li>Bayesian Additive Regression Trees (<code>bart</code>)</li>
<li>Bayesian Causal Forests (<code>bcf</code>)</li>
<li>Causal Forests (<code>cf</code>)</li>
<li>Poisson Regression (<code>poisson</code>)</li>
</ul>
<p><strong>(2)</strong> The <code>include_ps_dis</code> and
<code>include_ps_inf</code> arguments will only be considered if the ITE
method selected is <code>bart</code>, <code>cf</code>.</p>
<p>The CRE package can generate synthetic data that can be used to test
different features of the package. At the current implementation, the
code can generate data with continuous or binary outcomes.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">9687</span><span class="op">)</span></span>
<span>  <span class="va">dataset_cont</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_cre_dataset.html">generate_cre_dataset</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">300</span>, rho <span class="op">=</span> <span class="fl">0</span>, n_rules <span class="op">=</span> <span class="fl">2</span>, p <span class="op">=</span> <span class="fl">10</span>,</span>
<span>                                       effect_size <span class="op">=</span> <span class="fl">2</span>, binary <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="va">y</span> <span class="op">&lt;-</span> <span class="va">dataset_cont</span><span class="op">[[</span><span class="st">"y"</span><span class="op">]</span><span class="op">]</span></span>
<span>  <span class="va">z</span> <span class="op">&lt;-</span> <span class="va">dataset_cont</span><span class="op">[[</span><span class="st">"z"</span><span class="op">]</span><span class="op">]</span></span>
<span>  <span class="va">X</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">dataset_cont</span><span class="op">[[</span><span class="st">"X"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="va">X_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">X</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">method_params</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ratio_dis <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span>                       ite_method_dis<span class="op">=</span><span class="st">"bart"</span>,</span>
<span>                       ps_method_dis <span class="op">=</span> <span class="st">"SL.xgboost"</span>,</span>
<span>                       oreg_method_dis <span class="op">=</span> <span class="st">"SL.xgboost"</span>,</span>
<span>                       include_ps_dis <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                       ite_method_inf <span class="op">=</span> <span class="st">"bart"</span>,</span>
<span>                       ps_method_inf <span class="op">=</span> <span class="st">"SL.xgboost"</span>,</span>
<span>                       oreg_method_inf <span class="op">=</span> <span class="st">"SL.xgboost"</span>,</span>
<span>                       include_ps_inf <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                       include_offset <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                       cate_method <span class="op">=</span> <span class="st">"DRLearner"</span>,</span>
<span>                       cate_SL_library <span class="op">=</span> <span class="st">"SL.xgboost"</span>,</span>
<span>                       filter_cate <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                       offset_name <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>                       random_state <span class="op">=</span> <span class="fl">3591</span><span class="op">)</span></span>
<span></span>
<span> <span class="va">hyper_params</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ntrees_rf <span class="op">=</span> <span class="fl">100</span>,</span>
<span>                     ntrees_gbm <span class="op">=</span> <span class="fl">50</span>,</span>
<span>                     node_size <span class="op">=</span> <span class="fl">20</span>,</span>
<span>                     max_nodes <span class="op">=</span> <span class="fl">5</span>,</span>
<span>                     max_depth <span class="op">=</span> <span class="fl">15</span>,</span>
<span>                     max_decay <span class="op">=</span> <span class="fl">0.025</span>,</span>
<span>                     type_decay <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                     t_anom <span class="op">=</span> <span class="fl">0.025</span>,</span>
<span>                     t_corr <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                     replace <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                     q <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>                     stability_selection <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                     pfer_val <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cre_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cre.html">cre</a></span><span class="op">(</span><span class="va">y</span>, <span class="va">z</span>, <span class="va">X</span>, <span class="va">method_params</span>, <span class="va">hyper_params</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Naeem Khoshnevis, Daniela Maria Garcia, Riccardo Cadei, Kwonsang Lee, Falco Joannes Bargagli Stoffi.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
